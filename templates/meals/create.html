{% extends 'base.html' %}
{% block content %}
<h1 class="title">Create Meal</h1>
<form method="post">
  <div class="field"><label class="label">Meal Type</label>
    <div class="select"><select name="mealType" required>
      <option>breakfast</option>
      <option>lunch</option>
      <option>dinner</option>
      <option>snack</option>
    </select></div>
  </div>
  <div class="field"><label class="label">Log Time</label><div class="control"><input class="input" type="datetime-local" name="logTime"></div></div>
  <hr>
  <h2 class="subtitle">Items</h2>
  <div id="items">
    <div class="columns">
      <div class="column">
        <div class="select is-fullwidth"><select name="foodID">
          {% for f in foods %}<option value="{{ f.foodid or f.foodID }}">{{ f.name or f.Name }}</option>{% endfor %}
        </select></div>
      </div>
      <div class="column"><input class="input" type="number" min="1" name="quantityInGram" placeholder="grams"></div>
    </div>
  </div>
  <button class="button" type="button" onclick="addItem()">Add Item</button>
  <button class="button is-primary" type="submit">Create</button>
</form>
<script>
function addItem(){
  const items = document.getElementById('items');
  const row = document.createElement('div');
  row.className = 'columns';
  row.innerHTML = `
    <div class="column">
      <div class="select is-fullwidth"><select name="foodID">
        {% for f in foods %}<option value="{{ f.foodid or f.foodID }}">{{ f.name or f.Name }}</option>{% endfor %}
      </select></div>
    </div>
    <div class="column"><input class="input" type="number" min="1" name="quantityInGram" placeholder="grams"></div>
  `;
  items.appendChild(row);
}
</script>
{% endblock %}
